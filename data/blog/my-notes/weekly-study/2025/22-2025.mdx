---
title: 2025-第二十二周
date: '2025-05-25'
tags: ['WEEKLY-2025']
draft: false
summary: ''
---

`该周报主要为各个地方内容的汇总整理`

<TOCInlineWithSticky toc={props.toc} />

## 技术

### [构建你自己的 TanStack Query](https://mugglim.github.io/build-your-own-tanstack-query/)

从头开始重写以深入学习 TanStack Query。

- 🔄 通过实践从头重写代码来加深对 TanStack Query 的理解  
- � 强调动手经验在掌握新技术中的重要性  
- 📚 目标是更全面地掌握 TanStack Query 的核心概念和用法

### [CSS 实用类与“关注点分离”](https://adamwathan.me/css-utility-classes-and-separation-of-concerns/)

Adam Wathan 分享了他从语义化 CSS 到功能型 CSS 的转变过程，探讨了如何通过实用工具类（utility classes）提高 CSS 的可重用性和一致性。

- 🔄 **从语义化 CSS 到功能型 CSS**：作者最初遵循“关注点分离”原则，使用基于内容的类名（如 `.author-bio`），但发现 CSS 仍然高度依赖 HTML 结构。  
- 🧩 **BEM 方法**：采用 BEM 风格的类名（如 `.author-bio__image`）降低了 CSS 对 HTML 结构的依赖，但仍面临相似组件的样式复用问题。  
- ♻️ **内容无关的组件**：通过创建与内容无关的组件（如 `.media-card`），实现样式的高效复用，但 HTML 需要依赖 CSS 的类名。  
- 🛠️ **实用工具类**：引入实用工具类（如 `.align-right`、`.mar-r-sm`）进一步解耦样式，避免重复编写 CSS，并通过组合类名快速构建 UI。  
- 🎨 **一致性与约束**：实用工具类强制开发者从预定义的选项中选择样式，避免随意值，从而提升设计一致性。  
- ⚖️ **组件与实用工具类的平衡**：作者建议以实用工具类优先，仅在模式重复出现时提取为组件，避免过早抽象。  
- 🚀 **推荐工具**：介绍了 Tachyons、Basscss 等实用工具类框架，并推荐了自己的开源项目 Tailwind CSS。  

这种实用工具优先的方法通过约束样式选择，显著提升了代码的可维护性和设计一致性。

### [我觉得 generators 的工效学越来越吸引我了](https://macarthur.me/posts/generators/)

作者分享了对 JavaScript 生成器（generators）逐渐产生好感的心路历程，探讨了其语法糖特性、惰性求值优势，以及在实际场景中的应用价值，如解耦组件、简化异步操作和高效分页处理。

- 🌟 作者最初对生成器持保留态度，但通过实践逐渐欣赏其设计理念和实用性。
- 🔄 生成器依赖迭代器（iterator）和可迭代协议（iterable），通过`next()`方法按需生成序列值。
- 🛋️ 惰性求值是核心优势——仅在需要时计算值，避免不必要的性能开销（如处理大型数据集或复杂计算）。
- 🧩 生成器能有效降低代码耦合度，封装内部状态（如动态计算移动平均值案例），提升模块化。
- ⏳ 异步生成器（`async generator`）简化轮询逻辑（如定期获取应用指标），替代`setInterval`/递归方案，避免回调地狱。
- 📚 分页场景中，生成器按需请求数据，减少内存占用并加速首屏处理。
- 🛠️ 动态生成元素等工具函数中，生成器提供类似数组的解构能力（如`const [el1, el2] = getElements()`）。
- 🤔 作者承认生成器并非万能，但认可其重构问题解决思路的长期价值。

### [6 种方式：Slack、Notion 和 VSCode 如何提升 Electron 应用性能 | Palette 文档](https://palette.dev/blog/improving-performance-of-electron-apps)

Electron 应用性能优化的六个关键策略，通过 Slack、Notion 和 VSCode 等案例展示了如何解决启动慢和交互卡顿问题。

- 🚀 **使用打包工具替代 require()**  
  避免同步阻塞的`require()`，采用 Webpack/Vite 等打包工具，显著提升启动速度（如 Atom 案例中减少模块加载时间）。

- ⏳ **延迟非关键代码加载**  
  通过路由级代码拆分（如 React 的`lazy+Suspense`）和异步导入，将启动时间从 10 秒缩短至 3 秒。

- 🏗️ **迁移计算密集型任务到 WebAssembly/Native 模块**  
  Notion、Figma 等应用通过 WASM 或原生模块（如 1Password 加密）优化性能，实现确定性高性能。

- 📸 **利用 V8 快照加速初始化**  
  使用`electron-link`生成快照（如 Atom 启动提速 50%），避免动态值且适用于框架初始化阶段。

- 📊 **监控生产环境用户体验指标**  
  收集点击/滚动延迟等感知性能数据（如 Slack 内置监控工具），VSCode 通过输入延迟追踪版本回归。

- 🔥 **端到端 JavaScript 性能分析**  
  Notion 借助 Palette 平台分析生产环境代码瓶颈，定位 15% 输入延迟问题，缩短故障排查周期 3-4 周。

## 工具

### [livestore](https://github.com/livestorejs/livestore)

LiveStore 是一个基于响应式 SQLite 和内置同步引擎的下一代状态管理框架

### [Extract2MD](https://github.com/hashangit/Extract2MD)

Extract2MD 是一个强大且多功能的 AI 驱动客户端 JavaScript 库，用于从 PDF 文件中提取文本并将其转换为 Markdown

## 更新

### [发布 v14.0.0 · tj/commander.js · GitHub](https://github.com/tj/commander.js/releases/tag/v14.0.0)

commander.js 发布了 v14.0.0 版本，要求 Node.js v20 或更高版本，新增了功能组支持和未转义负数参数解析，修复了一些问题，并进行了内部重构。

- 🚀 新增了对选项和命令组支持，通过 `.helpGroup()`、`.optionsGroup()` 和 `.commandsGroup()` 方法 (#2328)  
- 🔢 支持未转义的负数作为选项参数和命令参数 (#2339)  
- 🛠 TypeScript 中为 `Argument` 类添加了 `parseArg` 属性 (#2359)  
- 🐛 修复了帮助信息中默认值无描述时的多余空格问题 (#2348)  
- 🔄 `.configureOutput()` 现在复制设置而非原地修改，避免副作用 (#2350)  
- ⚠️ 重大变更：Commander 14 需要 Node.js v20 或更高版本  
- 🔧 内部重构了 `Help` 类，新增 `formatItemList()` 和 `groupItems()` 方法 (#2328)  
- 🎉 发布版本 v14.0.0，包含上述更新和修复

### [Node.js — Node v22.16.0（长期支持版）](https://nodejs.org/en/blog/release/v22.16.0)

Node.js v22.16.0 (LTS) 版本发布，包含多项功能更新、性能优化和错误修复。

- 🚀 **重要更新**：时区数据更新至 2025b 版本，确保日期和时间处理的准确性。
- 📚 **文档改进**：新增 Dario Piotrowicz 为协作者，并修复多处文档错误和格式问题。
- ⚡ **ESM 增强**：支持`import.meta`属性的正式毕业，提升模块系统的稳定性。
- 🛠 **SQLite 功能扩展**：新增`StatementSync.prototype.columns()`方法，增强数据库操作能力。
- 🔧 **配置支持**：引入`node.config.json`作为默认配置文件，简化应用配置管理。
- 🧩 **新 API**：新增`worker.getHeapStatistics()`方法，提供工作线程堆内存统计信息。
- 🐞 **错误修复**：修复跨领域`SharedArrayBuffer`验证和`ArrayBuffer`检查问题，提升安全性。
- ⚙️ **性能优化**：改进断言和工具模块的深层对象比较性能，提升执行效率。
- 📦 **依赖更新**：升级 zstd 至 1.5.7，zlib 至 1.3.0.1，确保依赖库的最新功能和安全性。
- 🔄 **流处理改进**：在`finished()`中保留 AsyncLocalStorage 上下文，确保异步操作的连续性。
- 📊 **测试增强**：新增多个测试用例，覆盖 SQLite、REPL 和 HTTP/2 等模块，提升代码质量。

## 设计

### [背景素材网站](https://grainient.supply/)

高品质、颗粒感纹理和平滑渐变背景素材

## AI

### [MoneyPrinterTurbo](https://github.com/harry0703/MoneyPrinterTurbo)

MoneyPrinterTurbo 是一款全自动短视频生成工具，用户只需提供视频主题或关键词，即可自动生成文案、素材、字幕和背景音乐，并合成高清短视频。支持 Web 和 API 界面，适合中英文用户，提供多种视频尺寸和语音合成选项，且素材无版权。项目开源，支持多种 AI 模型接入，并有详细的部署和使用指南。

- 💡 **全自动视频生成**：输入主题或关键词，自动生成完整短视频  
- 🖥️ **多界面支持**：提供 Web 和 API 两种操作方式  
- 🌍 **中英文兼容**：支持生成中文和英文视频内容  
- 🎨 **灵活尺寸**：可选竖屏（9:16）或横屏（16:9）  
- 🔈 **语音合成**：多种声音可选，支持实时试听  
- 📝 **字幕定制**：可调整字体、颜色、大小及位置  
- 🎵 **背景音乐**：内置无版权音乐或自定义本地文件  
- 🤖 **多模型接入**：支持 OpenAI、DeepSeek、文心一言等  
- 🚀 **便捷部署**：提供 Docker、Colab 及一键启动包  
- 📅 **持续更新**：计划增加更多配音、转场效果和素材来源

### [GeminiImageApp](https://github.com/0xsline/GeminiImageApp)

基于 Google Gemini AI 的全功能图像处理应用

## 其他

### [中国 AI 应用的终局：AI RaaS 和 AI 包工头模式](https://mp.weixin.qq.com/s?__biz=Mzg5NTc0MjgwMw==&mid=2247516258&idx=1&sn=09aec44e46b8e7bf0dc995e0919a0444)

AI 应用付费模式的核心在于价值呈现，尤其是 RaaS（结果即服务）的“AI 包工头模式”将成为颠覆性方向。以下是关键要点：

- 🤖 **AI 替代传统 SaaS**：传统 SaaS 因功能标准化、数据模式过时将被端到端 AI 应用取代，资本价值下降。  
- 💰 **利润池放大 10-60 倍**：AI 包工头模式通过结果付费（如计件、分成）绑定客户利益，利润空间远超工具型或人力外包模式。  
- 🚀 **四大进化层级**：  
  - L1（计件制）：标准化任务效率提升（如 AI 客服）；  
  - L2（软硬结合）：复杂系统按量收费（如矿山无人运输）；  
  - L3（收入分成）：深度参与客户增收（如电商营销）；  
  - L4（AI 业主）：掌控核心资源（如 AI 探矿公司收购矿权）。  
- 🏆 **“五高”资本价值**：高科技含量、全链路优化、高可控性、强客户粘性、财务确定性，打破传统包工头“低端”标签。  
- 🔍 **垂直专注是关键**：必须深耕单一场景（如医疗、矿山），泛化布局易失败。  
- 👥 **人机协同不可缺**：纯 AI 无法替代人类在复杂决策和场景校准中的作用。  
- 🧹 **拥抱脏活累活**：非标环节（如极端环境测试）是壁垒，轻量化 AI 难持续。  
- ⏳ **1 年窗口期**：快速落地、绑定头部客户和资源，执行力决定护城河。  
- 🌍 **冲击传统行业**：案例包括矿山无人运输、AI 客服 Sierra、特斯拉 Robotaxi 等，均以结果付费重构商业模式。  

AI 包工头模式或成中国 SaaS 转型最后机遇，需聚焦垂直、人机结合、快速执行。
