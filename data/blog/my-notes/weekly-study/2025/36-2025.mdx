---
title: 2025-第三十六周
date: '2025-00-01'
tags: ['WEEKLY-2025']
draft: false
summary: ''
---

`该周报主要为各个地方内容的汇总整理`

<TOCInlineWithSticky toc={props.toc} />

## 技术

### [大规模自托管 Next.js 完整指南](https://dlhck.com/thoughts/the-complete-guide-to-self-hosting-nextjs-at-scale)

本文全面介绍了大规模自托管 Next.js 的生产环境部署挑战与解决方案，重点针对多副本水平扩展场景下的核心问题。

- 🐳 必须改造官方 Dockerfile：添加健康检查实现零停机部署，避免重启循环和僵尸容器
- 🌐 反向代理需禁用响应缓冲：配置 X-Accel-Buffering:no 确保 React Suspense 和流式响应正常工作
- 🧠 分布式缓存必须使用 Redis：替代本地文件缓存，解决多副本数据不一致问题
- 🖼️ 图像优化需外部处理：采用 ImageKit 或自托管 IPX 服务，避免重复处理造成的资源浪费
- 📦 CDN 必须遵循 Cache-Control：根据动态路由、认证状态等头部正确缓存内容
- 🔑 服务器动作需固定加密密钥：设置 NEXT_SERVER_ACTIONS_ENCRYPTION_KEY 避免部署版本不一致错误
- ⚠️ 注意 monorepo 陷阱：缓存处理器文件重复会导致连接失败，需使用绝对路径和 webpack 插件
- 📊 性能优化关键：监控 Redis 内存使用，控制缓存条目大小（建议 < 1MB），预处理数据再缓存
- 🔒 安全注意事项：服务器动作应视为公开 API 端点，必须实施身份验证和授权检查
- ✅ 生产清单：包含负载测试、副本健康监控、缓存命中率告警和回滚策略验证

## 工具

### [fastmcp](https://github.com/punkpeye/fastmcp)

FastMCP 是一个基于 TypeScript 的框架，用于构建支持客户端会话的 MCP（Model Context Protocol）服务器。它简化了 MCP 服务器的开发流程，提供了丰富的功能，如工具、资源、提示词定义、身份验证、会话管理、多媒体内容处理等，并支持多种传输协议和部署模式。

- 🚀 **功能丰富**：支持工具、资源、提示词、身份验证、会话、图像/音频内容、嵌入式资源、日志记录、错误处理、HTTP 流式传输、无状态模式等。
- 📦 **易于使用**：提供简洁的 API，快速构建 MCP 服务器，无需处理底层实现细节。
- 🌐 **多传输支持**：支持 stdio、HTTP 流式传输和 SSE，适用于本地和远程部署。
- 🔒 **身份验证与授权**：支持会话身份验证和工具访问控制，确保安全性。
- 📡 **流式输出与进度通知**：工具支持流式输出和进度报告，提升用户体验。
- 🔧 **可定制日志与错误处理**：支持自定义日志记录器和用户友好的错误提示。
- 🧩 **资源与模板**：支持动态资源加载和模板，提供自动补全功能。
- 🤖 **提示词与自动补全**：支持提示词模板和参数自动补全，增强 LLM 交互。
- ⚡ **无状态模式**：支持无状态部署，适合服务器 less 环境和负载均衡。
- 📚 **生态与展示**：已有多个第三方项目基于 FastMCP 开发，社区活跃。

## 更新

## 设计

## AI

### [claude-code-memory-bank](https://github.com/hudrazine/claude-code-memory-bank)

Claude Code Memory Bank 是一个专为 Claude Code 设计的结构化记忆管理系统，它通过持久化的项目上下文和自定义工作流命令，解决了多会话间上下文丢失的问题，从而提升 AI 辅助开发的效率和一致性。

- 🧠 **持久化上下文管理**：通过分层记忆文件（如 projectbrief.md、techContext.md 等）跨会话保存项目知识，避免每次重新开始。
- ⚙️ **自适应初始化**：使用 `/init-memory-bank` 命令自动检测项目状态，智能创建或补全记忆文件结构。
- 🔧 **自定义工作流命令**：提供 `/workflow:understand`、`/workflow:plan`、`/workflow:execute` 等命令，支持结构化任务执行与记忆更新。
- 📁 **项目无关与版本友好**：适用于任何技术栈，所有记忆文件均为 Markdown 格式，兼容版本控制系统（如 Git）。
- 🚀 **自动化文档生成**：在开发过程中自动创建和维护项目文档，形成有价值的副产品。
- 🌐 **开源与可扩展**：基于 Unlicense 许可开放使用，支持社区贡献和改进，可自定义命令与工作流。

## 其他
